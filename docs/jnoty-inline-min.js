"use strict";const NAME="jnoty-inline",VERSION="0.0.1",FLAG_ICONS={pending:'<div class="jnoty-inline-flag_spinner"></div>',fulfilled:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>',rejected:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-frown"><circle cx="12" cy="12" r="10"/><path d="M16 16s-1.5-2-4-2-4 2-4 2M9 9h.01M15 9h.01"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>'},EVENTS={CLOSE:"closed",FADE:"fading",OPEN:"showing"},CLASSNAME={CONTAINER:"jnoty-inline",ITEM:"jnoty-inline-item",FLAG:"jnoty-inline-flag",MESSAGE:"jnoty-inline-message",CONTROLE:"jnoty-inline-controls",CONTROL_CLOSE:"jnoty-inline-controls_close",THEME_PENDING:"jnoty-inline-pending",THEME_FULLFILLED:"jnoty-inline-fulfilled",THEME_REJECTED:"jnoty-inline-rejected",THEME_ERROR:"jnoty-inline-rejected"},KIND={PENDING:"pending",FULLFILLED:"fulfilled",REJECTED:"rejected",ERROR:"error"},Default={animation:!0,sticky:!1,delay:1e4,position:"bottom-right"};let jnotyContainer=null;class JnotyInline{constructor({kind:e="",message:t="",timeout:n=Default.delay,sticky:i=Default.sticky,position:o=Default.position}={}){this.id=_getUniqElementId(),this.kind=e,this.message=t,this.sticky=i,this.timeout=n,this.position=o,this.jnotyTheme=_getThemeForThisJnoty(this.kind),this.init()}init(){if(document.getElementsByClassName(CLASSNAME.CONTAINER).length)return;let e=document.createElement("div");e.className=CLASSNAME.CONTAINER,document.body.appendChild(e),jnotyContainer=e}show(){this.state=EVENTS.OPEN;let e=document.createElement("div");e.id=this.id,e.className=CLASSNAME.ITEM;let t=this.jnotyTheme.theme;e.classList.add(t),jnotyContainer.appendChild(e);let n=document.createElement("div");n.className=CLASSNAME.FLAG,n.innerHTML=this.jnotyTheme.flagIcon,e.appendChild(n);let i=document.createElement("div");if(i.className=CLASSNAME.MESSAGE,i.innerHTML=this.message,e.appendChild(i),this.kind!==KIND.PENDING){let t=document.createElement("div"),n=document.createElement("button");if(t.className=CLASSNAME.CONTROLE,n.className=CLASSNAME.CONTROL_CLOSE,n.innerHTML=FLAG_ICONS.close,t.appendChild(n),e.appendChild(t),!0!==this.sticky){_fade(this.id,this.timeout)&&(this.state=EVENTS.FADE)}t.addEventListener("click",()=>{try{timmer&&clearTimeout(timmer)}catch(e){}_removeJnotyElement(this.id)&&(this.state=EVENTS.CLOSE)})}}hide(){_removeJnotyElement(this.id)&&(this.state=EVENTS.CLOSE)}get currentJnoty(){return this.id}get getCurrentState(){return this.state}set setCurrentState(e){this.state=e}}function _getUniqElementId(){return"jnoty-inline_"+Math.random().toString(36).substr(2,9)}function _removeJnotyElement(e){try{return document.querySelector(`#${e}`).remove(),!0}catch(e){return!1}}function _fade(e,t){return setTimeout(()=>{_removeJnotyElement(e)},t)}function _getThemeForThisJnoty(e){let t=null,n=null;switch(e){case KIND.PENDING:t=CLASSNAME.THEME_PENDING,n=FLAG_ICONS.pending;break;case KIND.FULLFILLED:t=CLASSNAME.THEME_FULLFILLED,n=FLAG_ICONS.fulfilled;break;case KIND.REJECTED:t=CLASSNAME.THEME_REJECTED,n=FLAG_ICONS.rejected;break;case KIND.ERROR:t=CLASSNAME.THEME_ERROR,n=FLAG_ICONS.rejected;break;default:t=CLASSNAME.THEME_FULLFILLED,n=FLAG_ICONS.pending}return{theme:t,flagIcon:n}}export const jnotyInline=e=>{new JnotyInline(e).show()};for(const e of["fulfilled","pending","rejected","error"])jnotyInline[e]=(t=>jnotyInline(assign({kind:e},t)));function assign(e){for(let t=1;t<arguments.length;t++)for(const n in arguments[t])e[n]=arguments[t][n];return e}export default jnotyInline;
